<div class="converter-container">
  <div class="header-section">
    <h1>PC77 Point Code Converter</h1>
    <div class="animated-icon">üì°</div>
    <p class="subtitle-header">Nokia R4 Network SS7 Point Code Conversion</p>
  </div>

  <div class="card">
    <div class="controls">
      <div class="mode-toggle">
        <button [class.active]="mode() === 'toPC77'" (click)="mode.set('toPC77')" class="mode-btn">
          Decimal ‚Üí PC77
        </button>
        <button [class.active]="mode() === 'toDec'" (click)="mode.set('toDec')" class="mode-btn">
          PC77 ‚Üí Decimal
        </button>
      </div>
      <div class="button-group">
        <button (click)="swapMode()" class="btn-secondary">‚áÑ Swap</button>
        <button (click)="clearAll()" class="btn-secondary">üóëÔ∏è Clear</button>
        <button (click)="loadSample()" class="btn-secondary">üìÑ Sample</button>
      </div>
    </div>
  </div>

  @if (mode() === 'toPC77') {
    <div class="conversion-grid">
      <div class="card input-panel">
        <h2>üìä Decimal Input</h2>
        <p class="hint">Enter a decimal number (0 - 16383)</p>
        <input
          type="number"
          [(ngModel)]="decimalInput"
          placeholder="e.g., 1234"
          min="0"
          max="16383"
          class="value-input"
          aria-label="Decimal input"
        />
      </div>

      <div class="card output-panel">
        <div class="panel-header">
          <h2>üì° PC77 Output</h2>
          <button
            (click)="copyResult()"
            [disabled]="!pc77Result() || pc77Result().includes('Invalid')"
            class="btn-copy"
          >
            üìã Copy
          </button>
        </div>
        <div class="result-display" [class.error]="pc77Result().includes('Invalid')">
          {{ pc77Result() || 'PC77 will appear here...' }}
        </div>
      </div>
    </div>
  } @else {
    <div class="conversion-grid">
      <div class="card input-panel">
        <h2>üì° PC77 Input</h2>
        <p class="hint">Enter PC77 format (e.g., 9-82)</p>
        <input
          type="text"
          [(ngModel)]="pc77Input"
          placeholder="e.g., 9-82"
          pattern="[0-9]+-[0-9]+"
          class="value-input"
          aria-label="PC77 input"
        />
      </div>

      <div class="card output-panel">
        <div class="panel-header">
          <h2>üìä Decimal Output</h2>
          <button
            (click)="copyResult()"
            [disabled]="!decimalResult() || decimalResult().includes('Invalid')"
            class="btn-copy"
          >
            üìã Copy
          </button>
        </div>
        <div class="result-display" [class.error]="decimalResult().includes('Invalid')">
          {{ decimalResult() || 'Decimal will appear here...' }}
        </div>
      </div>
    </div>
  }

  @if (alternativeFormats(); as formats) {
    <div class="card">
      <h2>üåç Alternative Format Representations</h2>
      <p class="hint">Same point code shown in different international formats</p>
      <div class="alternative-formats-grid">
        <div class="format-card pc77">
          <h3>PC77 (7-7)</h3>
          <div class="format-value">{{ formats.pc77 }}</div>
          <div class="format-desc">Two 7-bit segments (0-127 each)</div>
        </div>
        <div class="format-card itu">
          <h3>ITU-T (3-8-3)</h3>
          <div class="format-value">{{ formats.itu383 }}</div>
          <div class="format-desc">Zone-Area-ID (14-bit standard)</div>
        </div>
        <div class="format-card decimal">
          <h3>Decimal</h3>
          <div class="format-value">{{ formats.decimal }}</div>
          <div class="format-desc">Base-10 representation</div>
        </div>
      </div>
    </div>
  }

  @if (binaryRepresentation(); as binary) {
    <div class="card">
      <h2>üî¢ Binary Representation</h2>
      <div class="binary-breakdown">
        <div class="binary-item">
          <span class="binary-label">Original Binary:</span>
          <code class="binary-value">{{ binary.original }}</code>
        </div>
        <div class="binary-item">
          <span class="binary-label">14-bit Padded:</span>
          <code class="binary-value padded">{{ binary.padded }}</code>
        </div>
        <div class="binary-split">
          <div class="binary-part">
            <span class="binary-label">First 7 bits:</span>
            <code class="binary-value first">{{ binary.first7 }}</code>
            <span class="decimal-equiv">= {{ parseInt(binary.first7, 2) }}</span>
          </div>
          <div class="separator">-</div>
          <div class="binary-part">
            <span class="binary-label">Second 7 bits:</span>
            <code class="binary-value second">{{ binary.second7 }}</code>
            <span class="decimal-equiv">= {{ parseInt(binary.second7, 2) }}</span>
          </div>
        </div>
      </div>
    </div>
  }

  <div class="info-card">
    <h3>üìö What is PC77 (Point Code 77)?</h3>
    <p>
      <strong>PC77</strong> (Point Code 77) is a signaling point code format used in Nokia's R4
      network infrastructure for SS7 (Signaling System No. 7) telecommunications networks. It
      represents a 14-bit point code as two 7-bit decimal numbers separated by a hyphen.
    </p>

    <h4>üîç Format Structure</h4>
    <p><strong>The PC77 format splits a 14-bit point code into two 7-bit segments:</strong></p>
    <div class="format-box">
      <p><strong>Format:</strong> XXX-XXX (where each part is 0-127)</p>
      <p><strong>Examples:</strong></p>
      <ul>
        <li>Point Code 100 = <code>0-100</code></li>
        <li>Point Code 5000 = <code>39-8</code></li>
        <li>Point Code 16383 = <code>127-127</code> (maximum value)</li>
      </ul>
    </div>

    <ul>
      <li><strong>Total Bits:</strong> 14 bits</li>
      <li><strong>Representation:</strong> Two 7-bit segments (0-127 each)</li>
      <li><strong>Format:</strong> [First 7 bits] - [Second 7 bits]</li>
    </ul>

    <h4>üì° SS7 (Signaling System No. 7)</h4>
    <p>
      SS7 is a set of telephony signaling protocols developed in 1975, which is used to set up and
      tear down telephone calls in most telecommunications networks worldwide. It also performs:
    </p>
    <ul>
      <li>Call setup, management, and teardown</li>
      <li>Wireless (cellular) services including roaming and SMS</li>
      <li>Local number portability (LNP)</li>
      <li>Toll-free (800/888) and toll (900) services</li>
      <li>Enhanced call features like caller ID and call forwarding</li>
    </ul>

    <h4>üèóÔ∏è Nokia R4 Network & 3GPP Release 4</h4>
    <p>
      <strong>R4</strong> refers to <strong>3GPP Release 4</strong> specifications in mobile
      telecommunications. The Nokia MSC Server System and related components based on 3GPP Release 4
      are network elements used in 2G/3G mobile telecommunications infrastructure for
      circuit-switched voice services. These Release 4 systems separate call control (MSC Server)
      and media switching (Media Gateway) into distinct network elements, and handle both GSM/EDGE
      and WCDMA services.
    </p>
    <p>
      <strong>Note:</strong> R4 systems are primarily for voice call control and switching in mobile
      networks, not specifically signaling gateways or STPs. Point codes are used to uniquely
      identify signaling points in the SS7 network that supports these voice services.
    </p>
    <div class="vendor-info">
      <h5>üì± Multi-Vendor Environment & Point Code Formats</h5>
      <p>
        SS7 networks involve equipment from multiple vendors, each supporting standardized point
        code formats:
      </p>

      <h6><strong>Standard Point Code Formats:</strong></h6>
      <ul>
        <li><strong>ITU-T (International):</strong> 14 bits in 3-8-3 format (Zone-Area-ID)</li>
        <li>
          <strong>ANSI (North America):</strong> 24 bits in 8-8-8 format (Network-Cluster-Member)
        </li>
        <li><strong>Japanese Variant:</strong> 16 bits in 7-4-5 format</li>
        <li><strong>Chinese Variant:</strong> 24 bits in 8-8-8 format</li>
        <li>
          <strong>PC77 (7-7 format):</strong> Alternative representation of 14-bit point codes
        </li>
      </ul>

      <div class="format-explanation">
        <h6><strong>üìñ How Different Formats Work:</strong></h6>

        <div class="format-example">
          <h5>3-8-3 Format (ITU-T) - 14 bits total</h5>
          <p><strong>Structure:</strong> Zone (3 bits) - Area (8 bits) - ID (3 bits)</p>
          <p><strong>Ranges:</strong> Zone: 0-7 | Area: 0-255 | ID: 0-7</p>
          <p><strong>Example: Decimal 1234</strong></p>
          <ol>
            <li>Convert to 14-bit binary: <code>00010011010010</code></li>
            <li>
              Split into 3-8-3 bits: <code>000</code> | <code>10011010</code> | <code>010</code>
            </li>
            <li>
              Convert each part to decimal:
              <ul>
                <li>Zone (3 bits): <code>000</code> = 0</li>
                <li>Area (8 bits): <code>10011010</code> = 154</li>
                <li>ID (3 bits): <code>010</code> = 2</li>
              </ul>
            </li>
            <li>Result: <code>0-154-2</code> (ITU-T 3-8-3 format)</li>
          </ol>
          <p>
            <strong>Compare with PC77:</strong> Same decimal 1234 = <code>9-82</code> (7-7 format)
          </p>
        </div>

        <div class="format-example">
          <h5>7-7 Format (PC77) - 14 bits total</h5>
          <p><strong>Structure:</strong> First (7 bits) - Second (7 bits)</p>
          <p><strong>Ranges:</strong> First: 0-127 | Second: 0-127</p>
          <p><strong>Example: Decimal 1234</strong></p>
          <ol>
            <li>Convert to 14-bit binary: <code>00010011010010</code></li>
            <li>Split into 7-7 bits: <code>0001001</code> | <code>1010010</code></li>
            <li>
              Convert each part to decimal:
              <ul>
                <li>First (7 bits): <code>0001001</code> = 9</li>
                <li>Second (7 bits): <code>1010010</code> = 82</li>
              </ul>
            </li>
            <li>Result: <code>9-82</code> (PC77 format)</li>
          </ol>
        </div>

        <div class="format-example">
          <h5>7-4-5 Format (Japanese) - 16 bits total</h5>
          <p><strong>Structure:</strong> Part1 (7 bits) - Part2 (4 bits) - Part3 (5 bits)</p>
          <p><strong>Ranges:</strong> Part1: 0-127 | Part2: 0-15 | Part3: 0-31</p>
          <p><strong>Example: Decimal 5000</strong></p>
          <ol>
            <li>Convert to 16-bit binary: <code>0001001110001000</code></li>
            <li>
              Split into 7-4-5 bits: <code>0001001</code> | <code>1100</code> | <code>01000</code>
            </li>
            <li>
              Convert each part to decimal:
              <ul>
                <li>Part1 (7 bits): <code>0001001</code> = 9</li>
                <li>Part2 (4 bits): <code>1100</code> = 12</li>
                <li>Part3 (5 bits): <code>01000</code> = 8</li>
              </ul>
            </li>
            <li>Result: <code>9-12-8</code> (Japanese 7-4-5 format)</li>
          </ol>
          <p class="note">
            <strong>Note:</strong> 16-bit format supports up to 65,535 (vs 14-bit max of 16,383)
          </p>
        </div>

        <div class="format-example">
          <h5>8-8-8 Format (ANSI) - 24 bits total</h5>
          <p><strong>Structure:</strong> Network (8 bits) - Cluster (8 bits) - Member (8 bits)</p>
          <p><strong>Ranges:</strong> Network: 0-255 | Cluster: 0-255 | Member: 0-255</p>
          <p><strong>Example: Decimal 100,000</strong></p>
          <ol>
            <li>Convert to 24-bit binary: <code>000000011000011010100000</code></li>
            <li>
              Split into 8-8-8 bits: <code>00000001</code> | <code>10000110</code> |
              <code>10100000</code>
            </li>
            <li>
              Convert each part to decimal:
              <ul>
                <li>Network (8 bits): <code>00000001</code> = 1</li>
                <li>Cluster (8 bits): <code>10000110</code> = 134</li>
                <li>Member (8 bits): <code>10100000</code> = 160</li>
              </ul>
            </li>
            <li>Result: <code>1-134-160</code> (ANSI 8-8-8 format)</li>
          </ol>
          <p class="note">
            <strong>Note:</strong> 24-bit format supports up to 16,777,215 point codes
          </p>
        </div>
      </div>

      <h6><strong>Vendor Implementations:</strong></h6>
      <ul>
        <li>
          <strong>Nokia:</strong> Supports ITU-T and ANSI standard formats; PC77 is one
          representation method for 14-bit codes
        </li>
        <li><strong>Ericsson:</strong> Implements ITU-T 3-8-3 and ANSI 8-8-8 formats</li>
        <li>
          <strong>Huawei:</strong> Supports both ITU and ANSI formats with flexible point code
          schemes
        </li>
        <li>
          <strong>Cisco:</strong> Implements ANSI and ITU-T point code formats in their STP products
        </li>
        <li>
          <strong>ZTE:</strong> Compatible with international standards for multi-vendor
          interoperability
        </li>
      </ul>

      <p>
        Despite vendor differences, all systems must interoperate using standardized SS7 protocols
        defined by ITU-T and ANSI. Point code translation and mapping are often required in
        multi-vendor networks to ensure seamless communication. The PC77 format (7-7) provides a
        compact, human-readable representation of 14-bit point codes, easier to read and manage than
        full binary or decimal notation.
      </p>
    </div>

    <h4>‚ùì Why PC77 is Used</h4>
    <ul>
      <li>
        <strong>Compact Representation:</strong> Easier to read and manage than full binary (14
        digits) or decimal (up to 5 digits)
      </li>
      <li>
        <strong>Human-Readable Format:</strong> The 7-7 split provides clear segmentation of the
        14-bit point code
      </li>
      <li>
        <strong>Error Detection:</strong> The two-part format helps identify input errors (each part
        limited to 0-127)
      </li>
      <li>
        <strong>Alternative to 3-8-3:</strong> Provides a different way to represent 14-bit ITU
        point codes
      </li>
      <li>
        <strong>Simplified Calculation:</strong> Each segment is exactly 7 bits, making manual
        conversion straightforward
      </li>
      <li>
        <strong>Legacy Compatibility:</strong> Maintains compatibility with systems using this
        representation
      </li>
    </ul>

    <h4>üìè Range Specification</h4>
    <div class="range-table">
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Value</th>
            <th>Explanation</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Minimum</strong></td>
            <td>0 (PC77: 0-0)</td>
            <td>All bits are zero</td>
          </tr>
          <tr>
            <td><strong>Maximum</strong></td>
            <td>16383 (PC77: 127-127)</td>
            <td>2<sup>14</sup> - 1 = 16383</td>
          </tr>
          <tr>
            <td><strong>Each Segment</strong></td>
            <td>0 - 127</td>
            <td>2<sup>7</sup> - 1 = 127 per segment</td>
          </tr>
          <tr>
            <td><strong>Total Possible Codes</strong></td>
            <td>16,384</td>
            <td>2<sup>14</sup> = 16,384 unique codes</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h4>üí° Detailed Examples</h4>
    <div class="examples-grid">
      <div class="example-box detailed">
        <strong>Example 1: Point Code 100</strong>
        <p><strong>Decimal to PC77:</strong></p>
        <ol>
          <li>100 in binary = <code>1100100</code> (7 bits)</li>
          <li>Pad to 14 bits = <code>00000001100100</code></li>
          <li>Split: <code>0000000</code> | <code>1100100</code></li>
          <li>Convert: 0 and 100</li>
          <li>Result: <code>0-100</code></li>
        </ol>
      </div>
      <div class="example-box detailed">
        <strong>Example 2: Point Code 200</strong>
        <p><strong>Decimal to PC77:</strong></p>
        <ol>
          <li>200 in binary = <code>11001000</code></li>
          <li>Pad to 14 bits = <code>00000011001000</code></li>
          <li>Split: <code>0000001</code> | <code>1001000</code></li>
          <li>Convert: 1 and 72</li>
          <li>Result: <code>1-72</code></li>
        </ol>
      </div>
      <div class="example-box detailed">
        <strong>Example 3: Point Code 5000</strong>
        <p><strong>Decimal to PC77:</strong></p>
        <ol>
          <li>5000 in binary = <code>1001110001000</code></li>
          <li>Pad to 14 bits = <code>01001110001000</code></li>
          <li>Split: <code>0100111</code> | <code>0001000</code></li>
          <li>Convert: 39 and 8</li>
          <li>Result: <code>39-8</code></li>
        </ol>
      </div>
      <div class="example-box detailed">
        <strong>Example 4: PC77 127-127</strong>
        <p><strong>PC77 to Decimal:</strong></p>
        <ol>
          <li>Split: 127 and 127</li>
          <li>127 in binary = <code>1111111</code> (7 bits)</li>
          <li>Concatenate: <code>11111111111111</code></li>
          <li>Convert to decimal: 16383</li>
          <li>Result: <code>16383</code> (max 14-bit value)</li>
        </ol>
      </div>
    </div>

    <h4>‚öôÔ∏è Conversion Process</h4>
    <div class="process-box">
      <h5>Decimal to PC77:</h5>
      <ol>
        <li>Convert decimal number to binary</li>
        <li>Pad with leading zeros to make it 14 bits</li>
        <li>Split into two 7-bit segments</li>
        <li>Convert each segment to decimal</li>
        <li>Join with hyphen: [segment1]-[segment2]</li>
      </ol>

      <h5>PC77 to Decimal:</h5>
      <ol>
        <li>Split PC77 by hyphen to get two numbers</li>
        <li>Convert each number to 7-bit binary</li>
        <li>Concatenate the two 7-bit binaries (14 bits total)</li>
        <li>Convert the 14-bit binary to decimal</li>
      </ol>
    </div>

    <h4>üîó Related Standards</h4>
    <ul>
      <li><strong>ITU-T Q.704:</strong> Defines SS7 MTP (Message Transfer Part)</li>
      <li><strong>ANSI T1.111:</strong> North American SS7 standard</li>
      <li><strong>3GPP TS 23.003:</strong> Mobile network numbering and identification</li>
    </ul>
  </div>
</div>
